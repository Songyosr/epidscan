<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Getting Started with epidscan • epidscan</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Getting Started with epidscan">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">epidscan</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/getting-started.html">Getting Started with epidscan</a></li>
    <li><a class="dropdown-item" href="../articles/satscan-parameters.html">SaTScan Parameter Reference</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Songyosr/epidscan/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Getting Started with epidscan</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/Songyosr/epidscan/blob/main/vignettes/getting-started.Rmd" class="external-link"><code>vignettes/getting-started.Rmd</code></a></small>
      <div class="d-none name"><code>getting-started.Rmd</code></div>
    </div>

    
    
<p><code>epidscan</code> is a modern R interface for
<strong>Spatio-temporal scan statistics</strong>, designed to bring
modern data science practices to epidemiological cluster detection.
While primarily built as a robust front-end for <a href="https://www.satscan.org/" class="external-link">SaTScan™</a>, its architecture allows
for future expansion to other methods.</p>
<div class="section level2">
<h2 id="design-principles">Design Principles<a class="anchor" aria-label="anchor" href="#design-principles"></a>
</h2>
<p><code>epidscan</code> is built around a few core ideas:</p>
<p><strong>Stateless by design:</strong> No hidden global state. Every
function call is independent and reproducible. Input validation happens
upfront rather than at runtime.</p>
<p><strong>Type-safe inputs:</strong> The <code>ss_tbl</code> system
validates data structure before analysis runs. Location IDs,
coordinates, and time formats are checked at construction time.</p>
<p><strong>Spatial-first:</strong> Native support for <code>sf</code>
objects. Coordinate system detection and ordering handled
automatically.</p>
<p><strong>Parameter transparency:</strong> Three-level parameter
hierarchy (data defaults → function overrides → template files) makes
configuration explicit and traceable.</p>
</div>
<div class="section level2">
<h2 id="core-workflow">Core Workflow<a class="anchor" aria-label="anchor" href="#core-workflow"></a>
</h2>
<div class="section level3">
<h3 id="create-validated-inputs">1. Create validated inputs<a class="anchor" aria-label="anchor" href="#create-validated-inputs"></a>
</h3>
<p>The <code>ss_*()</code> functions construct type-safe input objects.
This step ensures your data is correct before you ever run an
analysis.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://Songyosr.github.io/epidscan">epidscan</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Case file</span></span>
<span><span class="va">cas</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ss_cas.html">ss_cas</a></span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  loc_id <span class="op">=</span> <span class="st">"location_id"</span>,</span>
<span>  cases <span class="op">=</span> <span class="st">"case_count"</span>,</span>
<span>  time <span class="op">=</span> <span class="st">"onset_date"</span>,</span>
<span>  time_precision <span class="op">=</span> <span class="st">"day"</span> <span class="co"># "day", "month", "year", or "generic"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Coordinates file (works with sf objects or data frames)</span></span>
<span><span class="va">geo</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ss_geo.html">ss_geo</a></span><span class="op">(</span></span>
<span>  <span class="va">shapefile_sf</span>,</span>
<span>  loc_id <span class="op">=</span> <span class="st">"location_id"</span></span>
<span>  <span class="co"># Centroids extracted automatically</span></span>
<span>  <span class="co"># CRS detected and coordinates ordered correctly for SaTScan</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Population file</span></span>
<span><span class="va">pop</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ss_pop.html">ss_pop</a></span><span class="op">(</span></span>
<span>  <span class="va">population_data</span>,</span>
<span>  loc_id <span class="op">=</span> <span class="st">"location_id"</span>,</span>
<span>  time <span class="op">=</span> <span class="st">"census_year"</span>,</span>
<span>  population <span class="op">=</span> <span class="st">"pop_count"</span>,</span>
<span>  time_precision <span class="op">=</span> <span class="st">"year"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="configure-run">2. Configure &amp; Run<a class="anchor" aria-label="anchor" href="#configure-run"></a>
</h3>
<p>You can configure the analysis using a flexible object-oriented
approach or simple overrides.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Object-Oriented Configuration (Recommended)</span></span>
<span><span class="va">opts</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/prm_options.html">prm_options</a></span><span class="op">(</span></span>
<span>  AnalysisType <span class="op">=</span> <span class="fl">3</span>, <span class="co"># Space-time</span></span>
<span>  MonteCarloReps <span class="op">=</span> <span class="fl">999</span>,</span>
<span>  MaxSpatialSizeInPopulation <span class="op">=</span> <span class="fl">50</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Run Analysis</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/satscanr.html">satscanr</a></span><span class="op">(</span></span>
<span>  <span class="va">cas</span>,</span>
<span>  geo <span class="op">=</span> <span class="va">geo</span>,</span>
<span>  pop <span class="op">=</span> <span class="va">pop</span>,</span>
<span>  prm <span class="op">=</span> <span class="va">opts</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>The <code><a href="../reference/satscanr.html">satscanr()</a></code> function handles the messy work: - Writes
temporary SaTScan input files (<code>.cas</code>, <code>.geo</code>,
<code>.pop</code>). - Constructs a precise parameter file using the
three-level hierarchy. - Executes the SaTScan binary. - Parses the
results back into structured R objects.</p>
</div>
<div class="section level3">
<h3 id="work-with-results">3. Work with results<a class="anchor" aria-label="anchor" href="#work-with-results"></a>
</h3>
<p>Results are returned as S3 objects with support for the
<code>broom</code> package, making it easy to harness the results for
further analysis or visualization.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://broom.tidymodels.org/" class="external-link">broom</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Cluster-level details (tidy data frame)</span></span>
<span><span class="fu">tidy</span><span class="op">(</span><span class="va">result</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Analysis-level summary (metrics like max likelihood)</span></span>
<span><span class="fu">glance</span><span class="op">(</span><span class="va">result</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Visualize clusters</span></span>
<span><span class="co"># For Cartesian data or blank canvas mapping:</span></span>
<span><span class="fu"><a href="../reference/map_clusters.html">map_clusters</a></span><span class="op">(</span><span class="va">result</span>, simple <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="key-features-deep-dive">Key Features Deep Dive<a class="anchor" aria-label="anchor" href="#key-features-deep-dive"></a>
</h2>
<div class="section level3">
<h3 id="the-ss_tbl-system">The <code>ss_tbl</code> System<a class="anchor" aria-label="anchor" href="#the-ss_tbl-system"></a>
</h3>
<p>We strictly validate inputs at construction time to prevent runtime
errors in the external SaTScan executable.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cas</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ss_cas.html">ss_cas</a></span><span class="op">(</span><span class="va">data</span>, loc_id <span class="op">=</span> <span class="st">"id"</span>, cases <span class="op">=</span> <span class="st">"n"</span>, time <span class="op">=</span> <span class="st">"date"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">cas</span><span class="op">)</span></span>
<span><span class="co"># "ss_tbl" "data.frame"</span></span></code></pre></div>
<p>Features: - <strong>Zero-case/population checks</strong>: Rows with
zero counts are handled appropriately. - <strong>Time
formatting</strong>: We store raw times and format them correctly for
SaTScan (YYYY/MM/DD) only when writing files, respecting your specified
<code>time_precision</code>. - <strong>Role tracking</strong>: Metadata
about which column represents <code>cases</code>, <code>time</code>,
etc., is preserved.</p>
</div>
<div class="section level3">
<h3 id="spatial-data-support">Spatial Data Support<a class="anchor" aria-label="anchor" href="#spatial-data-support"></a>
</h3>
<p><code>epidscan</code> loves <code>sf</code>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># From sf object</span></span>
<span><span class="va">geo</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ss_geo.html">ss_geo</a></span><span class="op">(</span><span class="va">my_shapefile</span>, loc_id <span class="op">=</span> <span class="st">"GEOID"</span><span class="op">)</span></span></code></pre></div>
<ul>
<li>
<strong>Centroids</strong>: Automatically extracts centroids from
polygons.</li>
<li>
<strong>Projections</strong>: Detects if your data is
Latitude/Longitude (Geodetic) or Projected (Cartesian).</li>
<li>
<strong>Ordering</strong>: SaTScan is picky (Lat/Long vs X/Y). We
automatically order columns correctly based on the detected type.</li>
</ul>
</div>
<div class="section level3">
<h3 id="parameter-management">Parameter Management<a class="anchor" aria-label="anchor" href="#parameter-management"></a>
</h3>
<p>We use a “Level 3 Hierarchy” to resolve parameters: 1. <strong>Level
1 (Data Defaults)</strong>: Derived from your input data (e.g., file
names, date ranges inferred from data). 2. <strong>Level 2 (Function
Overrides)</strong>: Arguments passed directly to
<code><a href="../reference/satscanr.html">satscanr()</a></code> or <code><a href="../reference/prm_options.html">prm_options()</a></code> (e.g.,
<code>AnalysisType=3</code>). 3. <strong>Level 3 (Templates)</strong>: A
<code>.prm</code> file you provide (e.g.,
<code>prm_path = "template.prm"</code>).</p>
<p>Overrides take precedence! <code>AnalysisType</code> in
<code><a href="../reference/satscanr.html">satscanr()</a></code> will overwrite <code>AnalysisType</code> in your
template.</p>
</div>
</div>
<div class="section level2">
<h2 id="full-example-new-mexico-lung-cancer">Full Example: New Mexico Lung Cancer<a class="anchor" aria-label="anchor" href="#full-example-new-mexico-lung-cancer"></a>
</h2>
<p>This example uses the dataset distributed with this package.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://Songyosr.github.io/epidscan">epidscan</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://broom.tidymodels.org/" class="external-link">broom</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 1. Setup</span></span>
<span><span class="co"># ss_path &lt;- "/Applications/SaTScan.app/Contents/app/satscan" </span></span>
<span><span class="co"># set_satscan_path(ss_path)</span></span>
<span></span>
<span><span class="co"># 2. Load Data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">NMlung_cas</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">NMlung_pop</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">NMlung_geo</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 3. Prepare Inputs</span></span>
<span><span class="co"># Case File: Monthly data with Age/Sex covariates</span></span>
<span><span class="va">cas</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ss_cas.html">ss_cas</a></span><span class="op">(</span></span>
<span>  <span class="va">NMlung_cas</span>,</span>
<span>  loc_id <span class="op">=</span> <span class="st">"county"</span>,</span>
<span>  cases <span class="op">=</span> <span class="st">"cases"</span>,</span>
<span>  time <span class="op">=</span> <span class="st">"date"</span>,</span>
<span>  time_precision <span class="op">=</span> <span class="st">"month"</span>,</span>
<span>  covars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age_group"</span>, <span class="st">"sex"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Population File: Yearly census data</span></span>
<span><span class="va">pop</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ss_pop.html">ss_pop</a></span><span class="op">(</span></span>
<span>  <span class="va">NMlung_pop</span>,</span>
<span>  loc_id <span class="op">=</span> <span class="st">"county"</span>,</span>
<span>  time <span class="op">=</span> <span class="st">"year"</span>,</span>
<span>  population <span class="op">=</span> <span class="st">"population"</span>,</span>
<span>  time_precision <span class="op">=</span> <span class="st">"year"</span>,</span>
<span>  covars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age_group"</span>, <span class="st">"sex"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Coordinates File: Cartesian (km)</span></span>
<span><span class="va">geo</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ss_geo.html">ss_geo</a></span><span class="op">(</span></span>
<span>  <span class="va">NMlung_geo</span>,</span>
<span>  loc_id <span class="op">=</span> <span class="st">"county"</span>,</span>
<span>  coord1 <span class="op">=</span> <span class="st">"x_km"</span>,</span>
<span>  coord2 <span class="op">=</span> <span class="st">"y_km"</span>,</span>
<span>  coord_type <span class="op">=</span> <span class="st">"cartesian"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 4. Configure &amp; Run</span></span>
<span><span class="va">my_prm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/prm_options.html">prm_options</a></span><span class="op">(</span></span>
<span>  AnalysisType <span class="op">=</span> <span class="fl">3</span>, <span class="co"># Retrospective Space-time</span></span>
<span>  ModelType <span class="op">=</span> <span class="fl">0</span>,    <span class="co"># Poisson</span></span>
<span>  TimeAggregationUnits <span class="op">=</span> <span class="fl">3</span>, <span class="co"># Month</span></span>
<span>  MonteCarloReps <span class="op">=</span> <span class="fl">999</span>,</span>
<span>  ReportGiniClusters <span class="op">=</span> <span class="st">"y"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># (This requires SaTScan to be installed and path set)</span></span>
<span><span class="co"># result &lt;- satscanr(</span></span>
<span><span class="co">#   cas = cas,</span></span>
<span><span class="co">#   geo = geo,</span></span>
<span><span class="co">#   pop = pop,</span></span>
<span><span class="co">#   prm = my_prm,</span></span>
<span><span class="co">#   output_dir = tempdir()</span></span>
<span><span class="co"># )</span></span>
<span></span>
<span><span class="co"># 5. Inspect (Mock output)</span></span>
<span><span class="co"># summary(result)</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Songyos Rajborirug.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
