% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/map_clusters.R
\name{map_clusters}
\alias{map_clusters}
\title{Interactive Map of SaTScan Clusters}
\usage{
map_clusters(
  x,
  significance_only = FALSE,
  provider = "CartoDB.Positron",
  cluster_opacity = 0.6,
  color_palette = c("#d73027", "#fc8d59", "#fee08b", "#d9ef8b", "#91cf60", "#1a9850"),
  location_color = "#4575b4",
  show_locations = TRUE,
  popup_vars = NULL,
  verbose = FALSE,
  ...
)
}
\arguments{
\item{x}{A \code{satscan_result} object from \code{satscanr()}.}

\item{significance_only}{Logical. If \code{TRUE}, only display clusters with
p-value < 0.05. Default is \code{FALSE} (show all clusters).}

\item{provider}{Character. Leaflet tile provider. Options include
\code{"OpenStreetMap"}, \code{"CartoDB.Positron"}, \code{"Esri.WorldTopoMap"}, etc.
See \url{https://leaflet-extras.github.io/leaflet-providers/preview/}
for full list. Default is \code{"CartoDB.Positron"}.}

\item{cluster_opacity}{Numeric between 0 and 1. Opacity of cluster circles.
Default is 0.6.}

\item{color_palette}{Character vector of colors for cluster significance levels.
Default is \code{c("#d73027", "#fc8d59", "#fee08b", "#d9ef8b", "#91cf60", "#1a9850")}
(red to green spectrum).}

\item{location_color}{Character. Color for individual location markers.
Default is \code{"#4575b4"} (blue).}

\item{show_locations}{Logical. If \code{TRUE}, show individual location points
in addition to cluster boundaries. Default is \code{TRUE}.}

\item{popup_vars}{Character vector. Additional variables from \verb{$locations}
to include in location popups. Default is \code{NULL}.}

\item{verbose}{Logical. If \code{TRUE}, show progress messages. Default is \code{FALSE}.}

\item{...}{Additional arguments passed to \code{leaflet::addCircles()} for clusters.}
}
\value{
A \code{leaflet} map object (htmlwidget) that can be printed to display
or saved with \code{htmlwidgets::saveWidget()}.
}
\description{
Creates an interactive leaflet map displaying detected spatial clusters and
their member locations. Clusters are shown as circles with size proportional
to the number of locations, colored by statistical significance.
}
\details{
The function requires the \code{leaflet} package to be installed. If not available,
an informative error message is displayed.

\strong{Map Layers:}
\itemize{
\item \strong{Cluster circles}: Sized by number of member locations, colored by p-value
\item \strong{Location points}: Individual locations within clusters (if \code{show_locations = TRUE})
\item \strong{Popups}: Click on clusters or locations for detailed information
}

\strong{Color Scheme:}
By default, clusters are colored on a gradient from red (most significant,
p < 0.001) to green (least significant, p > 0.1). Non-significant clusters
(p >= 0.05) are shown in muted colors when \code{significance_only = FALSE}.

\strong{Coordinate Detection:}
The function automatically detects coordinate columns from the locations table:
\itemize{
\item Latitude: \code{lat}, \code{latitude}, \code{y}, \code{LATITUDE}
\item Longitude: \code{lon}, \code{long}, \code{longitude}, \code{x}, \code{LONGITUDE}
}
}
